<!DOCTYPE html>

<html lang="fr">

<head>
  <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content="Formulaire de g√©n√©ration de script TIBCO">
  <meta name="keywords" content="TIBCO, script, g√©n√©ration, automatisation">
  
  <title>Formulaire CompanIA</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='main.css') }}">

</head>
<body class="bg-gradient-to-br from-slate-900 to-black min-h-screen p-4 text-white">
  <div class="container mx-auto max-w-4xl space-y-8">
     <header class="text-center flex flex-row items-center gap-8 justify-center">
      <img src="{{ url_for('static', filename='logo3.png') }}" alt="Logo" class="h-24" />
      <h2 class="text-lg font-bold text-white">Bienvenue sur<br> <span class=" text-4xl text-transparent bg-clip-text bg-gradient-to-r from-cyan-300 to-purple-600 pl-2">Compan IA</span></h2>
    </header>
  
  
    
<form id="mainForm" action="/run-script" method="post" class="space-y-4">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <div>
        <label>Nom de l'entreprise</label>
        <input type="text" name="entreprise_nom" list="entreprise_list" placeholder="Entreprise X" required/>
        <datalist id="entreprise_list">
          {% for client in clients %}
            <option value="{{ client }}">
          {% endfor %}
        </datalist>
      </div>

      <div>
        <label>Secteur d'activit√©</label>
        <input type="text" name="secteur_entreprise" placeholder="Ex: automobile"/>
      </div>

      <div>
        <label>Pr√©nom et nom du contact</label>
        <input type="text" name="collaborateur_nom" placeholder="Michel Martin"/>
      </div>

        <div>
          <label>Code postal</label>
          <input type="text" name="code_postal" pattern="\d*" maxlength="5" placeholder="78540"/>
        </div>  
      </div>    

    <!-- 3 Colonnes -->
    
      <!-- Colonne 1 : dropdown -->
      <!-- <div >
        <label>Centres d‚Äôint√©r√™t</label>
        <div class="dropdown" id="interetsDropdown">
          <div class="dropdown-button">Cliquez pour s√©lectionner</div>
          <div class="dropdown-content gap-4">
            <label class="gap-3"><input type="checkbox" name="choix" value="Cyberdef"> Cyberd√©fense</label>
            <label class="gap-3"><input type="checkbox" name="choix" value="e-Commerce"> e-Commerce</label>
            <label class="gap-3"><input type="checkbox" name="choix" value="Data_IA"> Data & IA</label>
            <label class="gap-3"><input type="checkbox" name="choix" value="IMAC"> IMAC</label>
            <label class="gap-3"><input type="checkbox" name="choix" value="IngeÃÅnierie_Projet"> Ing√©nierie Projet</label>
            <label class="gap-3"><input type="checkbox" name="choix" value="Maintenance"> Maintenance</label>
            <label  class="gap-3"><input type="checkbox" name="choix" value="Reseau"> R√©seau</label>
            <label  class="gap-3"><input type="checkbox" name="choix" value="Seconde_vie_du_mateÃÅriel"> Seconde vie du mat√©riel</label>
            <label  class="gap-3"><input type="checkbox" name="choix" value="Support_Utilisateurs"> Support Utilisateurs</label>
            <label  class="gap-3"><input type="checkbox" name="choix" value="Systeme"> Syst√®me</label>
          </div>
        </div>
      </div> -->

      <!-- Colonne 2 : contexte + autre -->
      
        <div>
          <label>Contexte global de l'entretien</label>
          <textarea name="contexte" placeholder="Ici, ajoutez toute information utile. Exemple : 
          Il y a six mois, j'ai rencontr√© le CEO de l'entreprise ExempleCorp. 
          Ils viennent de lancer un appel d'offres pour un nouveau prestataire
          en mati√®re de recyclage des d√©chets √©lectroniques..." rows="8"></textarea>
        </div>

        <!-- <div>
          <label>Autre</label>
          <textarea name="autre" placeholder="Une question sp√©cifique √† poser √† CompanIA ?" rows="6"></textarea>
        </div>
       -->

       <div class="column">
          <p>Personnaliser votre prompt ?</p>
          <div class="flex flex-row gap-4">
            <label>
              <input type="radio" name="self_prompt_yn" value="Yes" onclick="togglePrompt(this)">
              Oui
            </label>
            <label>
              <input type="radio" name="self_prompt_yn" value="No" class="bg-gray-500" checked onclick="togglePrompt(this)">
              Non
            </label>
          </div>

          <!-- Bloc de cases √† cocher pour personnalisation -->
          <div id="custom-prompt" class="grid grid-cols-2 md:grid-cols-3 gap-2" style="display:none">
            <p class="col-span-2 md:col-span-3">Choisissez les blocs √† inclure dans le prompt :</p>
            
            <label class="itemPersonalisation"><input type="checkbox" name="blocks" value="actualite" checked> Actualit√© de l‚Äôentreprise</label>            
            <label class="itemPersonalisation"><input type="checkbox" name="blocks" value="reponse_tibco" checked> Offres de TIBCO</label>
            <label class="itemPersonalisation"><input type="checkbox" name="blocks" value="objectif_rdv" checked> Objectifs du rendez-vous</label>           
            <label class="itemPersonalisation"><input type="checkbox" name="blocks" value="problematique" checked> Probl√©matiques et enjeux pour le client</label>            
            <label class="itemPersonalisation"><input type="checkbox" name="blocks" value="questions" checked> Questions √† poser</label>
            <label class="itemPersonalisation"><input type="checkbox" name="blocks" value="next_steps" checked> Prochaines √©tapes</label>
          </div>
        </div>

      <!-- Colonne 3 : destinataires + boutons -->
      
        <div>
          <label>Destinataire(s) du rapport CompanIA</label>
          <input type="text" name="destinataire" placeholder="ex : tswift@tibco.fr ; mj@gmail.com" required/>
        </div>

        <div class="flex flex-col-reverse md:flex-row items-start gap-8 pt-8">

          <div class="w-full md:w-auto mx-auto">
            <form action="{{ url_for('suivi_feedback') }}" class="">
              <button type="submit" class="!py-3.5 !px-8" ><span class="mr-2"> üë£ </span> Acc√©der au formulaire de suivi</button>
            </form>
          </div>
        
          <div class="flex-1 w-full"> 
            <div class="gradient-border p-0.5 bg-gradient-to-r from-cyan-300 via-pink-500 to-purple-600 rounded-full w-full">
              <button type="submit" class="!bg-slate-800 text-white hover:!bg-blue-400"><span class="mr-2"> ü™Ñ </span>Envoyer le brief  </button>
            </div>
            <p class="opacity-50 text-white text-xs italic pt-2">Le brief arrivera dans les 3 √† 5 minutes</p>
          </div>    
        </div>
      </div>
</form>


        
      

  <script>
    const dropdown = document.getElementById("interetsDropdown");
    const button = dropdown.querySelector(".dropdown-button");

    button.addEventListener("click", () => {
      dropdown.classList.toggle("open");
    });

    document.addEventListener("click", (e) => {
      if (!dropdown.contains(e.target)) {
        dropdown.classList.remove("open");
      }
    });

        function togglePrompt(radio) {
      const customPrompt = document.getElementById("custom-prompt");
      if (radio.value === "Yes") {
        customPrompt.style.display = "grid";
      } else {
        customPrompt.style.display = "none";
      }
    }
  </script>
</body>
</html>
